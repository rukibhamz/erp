# Enable Rewrite Engine
RewriteEngine On

# Prevent directory listing
Options -Indexes

# Protect config files
<FilesMatch "\.(php|ini|conf)$">
    <Files "config.php">
        Require all denied
    </Files>
</FilesMatch>

# Block access to install directory after installation
# Uncomment the following lines AFTER installation is complete and verified
# RewriteCond %{REQUEST_URI} ^/install
# RewriteRule . - [F,L]

# Route all requests to index.php (allow assets and install to pass through)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/install
RewriteCond %{REQUEST_URI} !^/assets
RewriteCond %{REQUEST_URI} !^/uploads
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
